---
title: vim 进阶版
categories: 
  - Linux
tags:
  - vim
  - Linux
date: 2018-11-18
---

**参考链接**: https://linuxtoy.org/archives/efficient-editing-with-vim.html

## 高效率移动

### 在当前行里面有效的移动光标

- fx：移动光标到当前行的下一个 x 处。很明显，x 可以是任意一个字母，而且你可以使用 ; 来重复你的上一个 f 命令。
- tx：和上面的命令类似，但是是移动到 x 的左边一个位置。（这真的很有用）
- Fx：和 fx 类似，不过是往回找。
- w：光标往前移动一个词。
- b：光标往后移动一个词。
- 0：移动光标到当前行首。
- ^：移动光标到当前行的第一个字母位置。
- $：移动光标到行尾。
- )：移动光标到下一个句子。
- ( ：移动光标到上一个句子。

### 在整个文件里面有效移动光标

- ctrl+F：向下移动一屏。
- ctrl+B：向上移动一屏。
- G：到文件尾
- numG：移动光标到指定的行（num）。（比如 10G 就是到第 10 行）
- gg：到文件首
- H：移动光标到屏幕上面
- M：移动光标到屏幕中间
- L：移动光标到屏幕下面
- *：读取光标处的字符串，并且移动光标到它再次出现的地方。
- #：和上面的类似，但是是往反方向寻找。
- /text：从当前光标处开始搜索字符串 text，并且到达 text 出现的地方。必须使用回车来开始这个搜索命令。如果想重复上次的搜索的话，按 n。
- ？text：和上面类似，但是是反方向。
- ma：在当前光标的位置标记一个书签，名字为 a。书签名只能是小写字母。你看不见书签的存在，但它确实已经在那里了。
- \`a：到书签 a 处。注意这个不是单引号，它一般位于大部分键盘的 1 的左边。
- \`.：到你上次编辑文件的地方。这个命令很有用，而且你不用自己去标记它。

## 高效的输入

### 自动补全

使用关键词自动完成功能，你只需要输入开始几个字母（比如 iAmAL），然后按 `<C-N>`（按住 Ctrl，再按 N）或者 `<C-P>`。如果 Vim 没有给出你想要的词，继续按，直到你满意为止，Vim 会一直循环它找到的匹配的字符串

### 进入插入模式

- i：在当前字符的左边插入
- I：在当前行首插入
- a：在当前字符的右边插入
- A：在当前行尾插入
- o：在当前行下面插入一个新行
- O：在当前行上面插入一个新行
- c{motion}：删除 motion 命令跨过的字符，并且进入插入模式。比如：c$，这将会删除从光标位置到行尾的字符并且进入插入模式。ct！，这会删除从光标位置到下一个叹号（但不包括），然后进入插入模式。被删除的字符被存在了剪贴板里面，并且可以再粘贴出来。
- d{motion}：和上面差不多，但是不进入插入模式。

## 移动大段文本

### 可视选择

- v：按字符选择。经常使用的模式，所以亲自尝试一下它。
- V：按行选择。这在你想拷贝或者移动很多行的文本的时候特别有用。
- ctrl+V：按块选择。非常强大，只在很少的编辑器中才有这样的功能。你可以选择一个矩形块，并且在这个矩形里面的文本会被高亮。

在选择模式的时候使用上面所述的方向键和命令（motion）。比如，vwww，会高亮光标前面的三个词。Vjj 将会高亮当前行以及下面两行。

### 在可视选择模式下剪切和拷贝
一旦你高亮了选区，你或许想进行一些操作：

- d：剪贴选择的内容到剪贴板。
- y：拷贝选择的内容到剪贴板。
- c：剪贴选择的内容到剪贴板并且进入插入模式。

### 在非可视选择模式下剪切和拷贝
如果你很清楚的知道你想拷贝或者剪切什么，那你根本就不需要进入可视选择模式。这样也会节省时间：

- d{motion}：剪切 motion 命令跨过的字符到剪贴板。比如，dw 会剪切一个词而 dfS 会将从当前光标到下一个 S 之间的字符剪切至剪贴板。
- y{motion}：和上面类似，不过是拷贝。
- c{motion}：和 d{motion} 类似，不过最后进入插入模式。
- dd：剪切当前行。
- yy：拷贝当前行。
- cc：剪切当前行并且进入插入模式。
- D：剪切从光标位置到行尾到剪贴板。
- Y：拷贝当前行。
- C：和 D 类似，最后进入插入模式。
- x：剪切当前字符到剪贴板。
- s：和x类似，不过最后进入插入模式。

### 粘贴
粘贴很简单，按 p。

## 避免重复
### 令人惊奇的 . 命令
在 Vi 里面，输入 `.` (小数点符号），将会重复你输入的上一个命令。比如，你上个命令为“dw”（删除一个词），Vi 将会接着再删除一个词。

### 使用数字
使用数字也是 Vim 强大的而且很节省时间的重要特性之一。在很多 Vim 的命令之前都可以使用一个数字，这个数字将会告诉 Vim 这个命令需要执行几次。比如：

- 3j: 将会把光标向下移动三行。
- 10dd: 将会删除十行。
- y3": 将会拷贝从当前光标到第三个出现的引号之间的内容到剪贴板。
数字是扩展 motion 命令作用域非常有效的方法。

### 记录宏
有时候，你会发现你自己在文章的每段或者每行都重复相同的一系列动作。Vim 允许你记录一个宏来完成你的特殊需要。

- qregister：记录宏到寄存器 register，这里 register 是任意的你的寄存器的名字。比如 qa，将会记录并且把宏存在寄存器 a 里面。
- q：结束宏的记录。
- @register：使用存在寄存器 register 的宏。比如 @a，将会使用存在寄存器 a 里面的宏。

必须要记住的是，宏只记录了你的系列按键并且重复执行它们。它们不是魔法。因为在 Vim 里面完成目的的方法有很多，所以有时候你要小心选择命令来记录你的宏。因为它们会在所有你要执行它的地方执行。

## 用 Vim 写代码
Vim 是一个用来写代码的绝好编辑器，因为它有一些特性是专门为程序员而设计的。这里是一些常用的：

- ]p：和 p 的功能差不多，但是它会自动调整被粘贴的文本的缩进去适应当前代码的位置。试一下！
- %：匹配花括号、方括号、括号等。在一个括号的上面，然后按 %，鼠标就会出现在匹配的另外一半括号处。
- >>：缩进所有选择的代码
- <<：和上面类似，但是反缩进
- gd：到达光标所在处函数或者变量的定义处。
- K：在 Man 里面查找光标当前所在处的词。